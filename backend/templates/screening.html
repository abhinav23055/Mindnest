<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MindNest | Assessment Center</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --primary: #4f7f6a;
            --secondary: #e6f0ec;
            --text: #2f2f2f;
            --bg: #f9faf9;
            --white: #ffffff;
            --warm-gold: #d1a054;
            --soft-red: #f87171;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); }

        /* --- ZEN ZONE STYLE HEADER --- */
        .zen-header {
            background: var(--white);
            padding: 20px 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .logo { font-size: 1.6rem; font-weight: 700; color: var(--primary); letter-spacing: -1px; }
        .nav-links { display: flex; gap: 30px; }
        .nav-links a { text-decoration: none; color: var(--text); font-weight: 500; transition: 0.3s; }
        .nav-links a:hover { color: var(--primary); }

        .container { max-width: 1100px; margin: 40px auto; padding: 0 20px; }
        
        .hero-section {
            background: linear-gradient(135deg, #fff 0%, #f0f7f4 100%);
            padding: 60px;
            border-radius: 30px;
            text-align: center;
            margin-bottom: 40px;
            border: 1px solid rgba(79, 127, 106, 0.1);
        }
        .hero-section h1 { color: var(--primary); font-size: 2.8rem; margin-bottom: 15px; }
        .hero-section p { font-size: 1.1rem; color: #666; max-width: 600px; margin: 0 auto; line-height: 1.6; }

        /* Assessment Grid */
        .test-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }
        .test-card {
            background: var(--white); border: 1px solid #eee; padding: 35px 25px; border-radius: 20px;
            cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); text-align: center;
            font-weight: 600; color: var(--primary); font-size: 1rem; box-shadow: 0 4px 6px rgba(0,0,0,0.02);
        }
        .test-card:hover { transform: translateY(-8px); background: var(--primary); color: var(--white); box-shadow: 0 15px 30px rgba(79, 127, 106, 0.2); }

        /* Quiz Overlay */
        #quizOverlay { display: none; position: fixed; inset: 0; background: rgba(255,255,255,0.98); z-index: 1000; overflow-y: auto; padding: 40px 20px; }
        .quiz-modal { max-width: 800px; margin: 0 auto; position: relative; }
        .close-btn { position: fixed; top: 30px; right: 40px; cursor: pointer; font-size: 30px; color: var(--primary); font-weight: 300; }
        
        .opt-btn { width: 100%; text-align: left; padding: 18px; margin: 10px 0; border: 1px solid #eee; border-radius: 12px; background: var(--white); cursor: pointer; transition: 0.2s; font-size: 1rem; }
        .opt-btn:hover { background: var(--secondary); border-color: var(--primary); }
        .selected-opt { background: var(--primary) !important; color: var(--white) !important; border-color: var(--primary); }

        /* PDF Styles */
        .report-page { background: white; padding: 60px; color: var(--text); line-height: 1.8; font-family: 'Segoe UI', sans-serif; }
        .section-box { padding: 30px; border-radius: 20px; margin-bottom: 30px; border: 1px solid #f0f0f0; }
        .hope-header { color: var(--primary); border-bottom: 2px solid var(--secondary); padding-bottom: 20px; margin-bottom: 30px; font-size: 2.2rem; text-align: center; }
        
        @media print { .page-break { page-break-before: always; } }
    </style>
</head>
<body>

<header class="zen-header">
    <div class="logo">MindNest</div>
    <nav class="nav-links">
        <a href="#">Home</a>
        <a href="/zen">Zen Zone</a>
        <a href="#" style="color: var(--primary); font-weight: 700;">Assessments</a>
        <a href="#">Articles</a>
    </nav>
</header>

<div class="container">
    <div class="hero-section">
        <h1>Your Wellness Journey</h1>
        <p>Take a deep breath. These assessments are designed to help you understand your patterns so you can grow with intention.</p>
    </div>

    <div class="test-grid">
        <button class="test-card" onclick="openQuiz('Depression')">Depression Support</button>
        <button class="test-card" onclick="openQuiz('Anxiety')">Anxiety Support</button>
        <button class="test-card" onclick="openQuiz('ADHD')">Focus & ADHD</button>
        <button class="test-card" onclick="openQuiz('OCD')">OCD Support</button>
        <button class="test-card" onclick="openQuiz('Bipolar')">Bipolar Support</button>
        <button class="test-card" onclick="openQuiz('Psychosis')">Psychosis Support</button>
        <button class="test-card" onclick="openQuiz('Eating')">Eating Disorder Support</button>
        <button class="test-card" onclick="openQuiz('PTSD')">Healing from Trauma</button>
        <button class="test-card" onclick="openQuiz('Addiction')">Addiction Support</button>
        <button class="test-card" onclick="openQuiz('SocialAnxiety')">Social Anxiety</button>
        <button class="test-card" onclick="openQuiz('Postpartum')">Postpartum Support</button>
        <button class="test-card" onclick="openQuiz('Child')">Child Wellness</button>
    </div>
</div>

<div id="quizOverlay">
    <div class="quiz-modal">
        <span class="close-btn" onclick="closeQuiz()">‚úï</span>
        <h2 id="quizTitle" style="color:var(--primary); font-size: 2rem; margin-bottom:10px;"></h2>
        <p id="quizSub" style="color:#888; margin-bottom:40px;">Please reflect on your experiences over the last 14 days.</p>
        <div id="quizContent"></div>
    </div>
</div>

<script>
    // Full logic for all categories
    const quizData = {
        'Depression': ["Feeling sad or empty?", "Loss of interest?", "Low energy?", "Sleep issues?", "Hopelessness?", "Self-criticism?", "Focus trouble?", "Slowed movement?", "Loneliness?", "Negative outlook?"],
        'Anxiety': ["Nervous/On edge?", "Excessive worry?", "Can't stop worrying?", "Restless?", "Easily fatigued?", "Focus trouble?", "Irritability?", "Fear of bad outcomes?", "Physical tension?", "Life interference?"],
        'ADHD': ["Distractibility?", "Hyperactivity?", "Forgetfulness?", "Poor organization?", "Impulsivity?", "Starting but not finishing?", "Mental fog?", "Fidgeting?", "Interrupting others?", "Time blindness?"],
        'OCD': ["Intrusive thoughts?", "Ritualistic habits?", "Fear of germs?", "Need for symmetry?", "Excessive checking?", "Compulsive counting?", "Fear of harm?", "Repeating words?", "Clutter anxiety?", "Social avoidance?"],
        'PTSD': ["Flashbacks?", "Nightmares?", "Avoidance of triggers?", "Hyper-vigilance?", "Startle response?", "Memory gaps?", "Detachment?", "Irritability?", "Emotional numbness?", "Sleep disturbances?"],
        'Eating': ["Body image obsession?", "Calorie counting?", "Binge eating?", "Purging habits?", "Excessive exercise?", "Fear of weight gain?", "Eating in secret?", "Food guilt?", "Restricting food?", "Social eating fear?"],
        'Bipolar': ["Mood swings?", "High energy peaks?", "Deep lows?", "Racing thoughts?", "Impulsive spending?", "Less sleep needed?", "Over-confidence?", "Depressive episodes?", "Agitation?", "Talking too fast?"],
        'Psychosis': ["Hallucinations?", "Delusions?", "Disorganized speech?", "Paranoia?", "Flat emotions?", "Withdrawing socially?", "Confusion?", "Strange beliefs?", "Loss of motivation?", "Cognitive decline?"],
        'Addiction': ["Cravings?", "Failed attempts to stop?", "Tolerance increase?", "Withdrawal signs?", "Life neglect?", "Hiding the habit?", "Financial stress?", "Risk taking?", "Conflict with family?", "Prioritizing use?"],
        'SocialAnxiety': ["Fear of judgment?", "Avoiding crowds?", "Social blushing?", "Performance anxiety?", "Sweating in public?", "Shy in groups?", "Rehearsing talks?", "Post-event analysis?", "Fear of embarrassment?", "Avoiding phone calls?"],
        'Postpartum': ["Low bond with baby?", "Infant worry?", "Birth trauma?", "Post-birth exhaustion?", "Intrusive baby thoughts?", "Parental guilt?", "Mood shifts?", "Lack of appetite?", "Isolation?", "Help avoidance?"],
        'Child': ["Behavioral outbursts?", "School refusal?", "Bed wetting?", "Separation anxiety?", "Academic drop?", "Social withdrawal?", "New phobias?", "Appetite change?", "Regressive behavior?", "Aggression?"]
    };

    const emotionalInsights = {
        'Depression': {
            validation: "This low mood is not a choice. It is a biological shutdown aimed at protecting a tired mind.",
            science: "Depression is often linked to the 'Habenula'‚Äîa part of the brain that signals disappointment. When it's overactive, we lose motivation.",
            roadmap: ["Step outside for 5 minutes", "Drink 2L of water", "Identify one 'small win'", "Contact a supportive friend"]
        },
        'Anxiety': {
            validation: "Your anxiety is an overprotective friend. It's trying to keep you safe, but it's shouting too loud.",
            science: "The 'Amygdala' is your brain's smoke detector. In anxiety, it's detecting smoke where there is none.",
            roadmap: ["Practice Box Breathing", "Limit caffeine intake", "Write down 3 'What-ifs'", "Grounding (5-4-3-2-1 technique)"]
        }
        // ... (Logic continues for all categories)
    };

    const getFullInsight = (type) => emotionalInsights[type] || {
        validation: `Your experience with ${type} is valid. You are showing bravery just by naming these feelings.`,
        science: "Mental health is a balance of chemistry and environment. Your brain has the power to rewire through neuroplasticity.",
        roadmap: ["Prioritize sleep tonight", "Limit social media use", "Notice your breathing", "Reach out for help"]
    };

    let responses = {};

    function openQuiz(type) {
        responses = {};
        const overlay = document.getElementById('quizOverlay');
        const content = document.getElementById('quizContent');
        document.getElementById('quizTitle').innerText = type + " Assessment";
        overlay.style.display = 'block';
        content.innerHTML = "";

        quizData[type].forEach((q, i) => {
            content.innerHTML += `
                <div style="margin-bottom:35px;">
                    <p style="font-weight:600; margin-bottom:15px; font-size:1.1rem;">${i+1}. ${q}</p>
                    <div id="group-${i}">
                        <button class="opt-btn" onclick="setScore(${i}, 0, this)">Not at all</button>
                        <button class="opt-btn" onclick="setScore(${i}, 1, this)">Occasionally</button>
                        <button class="opt-btn" onclick="setScore(${i}, 2, this)">Frequently</button>
                        <button class="opt-btn" onclick="setScore(${i}, 3, this)">Almost Always</button>
                    </div>
                </div>`;
        });
        content.innerHTML += `<button onclick="generateReport('${type}')" style="background:var(--primary); color:white; border:none; padding:22px; border-radius:15px; width:100%; font-size:1.2rem; cursor:pointer; font-weight:bold; margin-top:20px;">Generate My Clinical Wellness Report</button>`;
    }

    function setScore(qIdx, val, btn) {
        responses[qIdx] = val;
        const parent = document.getElementById('group-' + qIdx);
        parent.querySelectorAll('.opt-btn').forEach(b => b.classList.remove('selected-opt'));
        btn.classList.add('selected-opt');
    }

    function generateReport(type) {
        if (Object.keys(responses).length < 10) { alert("Please complete all questions."); return; }
        
        let score = Object.values(responses).reduce((a, b) => a + b, 0);
        const insight = getFullInsight(type);
        const level = score <= 10 ? "Mild" : score <= 20 ? "Moderate" : "High";

        const reportHTML = `
            <div id="pdfOutput">
                <div class="report-page">
                    <h1 class="hope-header">Personal Wellness Report: ${type}</h1>
                    
                    <div class="section-box" style="background:var(--secondary); border:none;">
                        <h3 style="color:var(--primary); margin-bottom:10px;">Compassionate Validation</h3>
                        <p>${insight.validation}</p>
                    </div>

                    <div class="section-box">
                        <h3 style="margin-bottom:10px;">The Science of Your Experience</h3>
                        <p>${insight.science}</p>
                        
                    </div>

                    <div class="section-box" style="border: 2px solid var(--warm-gold);">
                        <h3 style="color:var(--warm-gold); margin-bottom:10px;">Immediate Care Protocol</h3>
                        <p>Before proceeding, take a sip of water and notice the weight of your body on your chair. You are here, and you are safe.</p>
                    </div>
                    
                    <div style="text-align:center; padding:20px; color:var(--muted);">
                        <strong>Symptom Intensity Indicator: ${level} (${score}/30)</strong>
                    </div>
                </div>

                <div class="report-page page-break">
                    <h2 class="hope-header">Your Recovery Roadmap</h2>
                    
                    <div class="section-box">
                        <h3 style="margin-bottom:15px;">A Gentle 7-Day Plan</h3>
                        <ul style="list-style: none;">
                            ${insight.roadmap.map((step, idx) => `
                                <li style="padding:15px 0; border-bottom:1px solid #eee;">
                                    <strong>Step ${idx+1}:</strong> ${step}
                                </li>
                            `).join('')}
                        </ul>
                    </div>

                    <div class="section-box" style="background:#fcfcfc;">
                        <h3 style="margin-bottom:15px;">Daily Reflection Log</h3>
                        <p style="font-size:0.9rem; margin-bottom:20px;">Use this grid to color in your energy levels throughout the week.</p>
                        <div style="display:flex; justify-content:space-around; font-size:1.8rem;">
                            <span>üåë</span><span>üåí</span><span>üåì</span><span>üåî</span><span>üåï</span><span>‚òÄÔ∏è</span><span>‚ú®</span>
                        </div>
                    </div>

                    <div class="section-box" style="background:#fff4f4; border-color:var(--soft-red);">
                        <h3 style="color:var(--soft-red);">Clinical Connection</h3>
                        <p>We recommend sharing this report with your physician or therapist. Healing is faster when we don't walk the path alone.</p>
                        <p style="margin-top:10px;"><strong>Crisis Contact:</strong> Dial 988 for 24/7 support.</p>
                    </div>

                    <div style="text-align:center; margin-top:60px;">
                        <p style="font-weight:bold; color:var(--primary); font-size:1.2rem;">"The sun will rise, and we will try again."</p>
                    </div>
                </div>
            </div>
            <button id="dlBtn" onclick="savePDF()" style="background:var(--primary); color:white; width:100%; padding:22px; border:none; border-radius:15px; margin-top:20px; cursor:pointer; font-weight:bold; font-size:1.1rem;">üì• Download Full 2-Page Wellness Report</button>
        `;

        document.getElementById('quizSub').style.display = 'none';
        document.getElementById('quizContent').innerHTML = reportHTML;
        document.querySelector('#quizOverlay').scrollTop = 0;
    }

    function savePDF() {
        const element = document.getElementById('pdfOutput');
        const btn = document.getElementById('dlBtn');
        btn.style.display = 'none';
        const opt = {
            margin: 0,
            filename: 'MindNest_Wellness_Report.pdf',
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
        };
        html2pdf().set(opt).from(element).save().then(() => btn.style.display = 'block');
    }

    function closeQuiz() { document.getElementById('quizOverlay').style.display = 'none'; }
</script>

</body>
</html>