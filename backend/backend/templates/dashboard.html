<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MindNest | Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Segoe UI", sans-serif; }
        body { background: #f9faf9; color: #2f2f2f; padding: 40px; }
        .dashboard-container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        h2 { color: #4f7f6a; margin-bottom: 20px; }
        .checkin-group { margin-bottom: 25px; }
        label { display: block; margin-bottom: 10px; font-weight: 500; color: #555; }
        input[type="range"] { width: 100%; accent-color: #4f7f6a; cursor: pointer; }
        .range-labels { display: flex; justify-content: space-between; font-size: 12px; color: #888; margin-top: 5px; }
        .btn { background: #4f7f6a; color: white; padding: 12px 24px; border-radius: 30px; border: none; cursor: pointer; width: 100%; font-size: 16px; transition: 0.3s; }
        .btn:hover { background: #3d6353; }
        .logout { text-align: center; margin-top: 20px; cursor: pointer; color: #888; text-decoration: underline; font-size: 14px; }
    </style>
</head>
<body>

    <div class="dashboard-container">
        <h2>How are you today?</h2>
        <p style="margin-bottom: 20px; color: #666;">Take a moment to check in with yourself.</p>

        <div class="checkin-group">
            <label>Mood (1 = Low, 5 = High)</label>
            <input type="range" id="mood" min="1" max="5" value="3">
            <div class="range-labels"><span>Low</span><span>Balanced</span><span>High</span></div>
        </div>

        <div class="checkin-group">
            <label>Energy (1 = Tired, 5 = Vibrant)</label>
            <input type="range" id="energy" min="1" max="5" value="3">
            <div class="range-labels"><span>Low</span><span>Balanced</span><span>High</span></div>
        </div>

        <div class="checkin-group">
            <label>Stress (1 = Calm, 5 = Overwhelmed)</label>
            <input type="range" id="stress" min="1" max="5" value="3">
            <div class="range-labels"><span>Calm</span><span>Manageable</span><span>High</span></div>
        </div>

        <button class="btn" onclick="submitCheckin()">Save Check-in</button>
        
        <div class="logout" onclick="logout()">Logout</div>
    </div>

    <script>
        // DEBUG: Check if we are logged in
// const userId = localStorage.getItem('user_id');
// console.log("Current User ID:", userId); // This shows up in the 'Inspect' console

// if (!userId) {
//     alert("No user found! Redirecting to login...");
//     window.location.href = "/signup"; 
// }

async function submitCheckin() {
    const mood = document.getElementById('mood').value;
    const energy = document.getElementById('energy').value;
    const stress = document.getElementById('stress').value;

    const response = await fetch('/api/checkin', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ 
            user_id: userId, 
            mood: parseInt(mood), 
            energy: parseInt(energy), 
            stress: parseInt(stress) 
        })
    });

    if (response.ok) {
        alert("Check-in saved successfully!");
    }
}
    </script>
</body>
</html>
